/*!
 * jQuery Mailinglistsubmitter plug-in v1.1.0 - 2016-07-11T06:07Z
 * http://PlainMacaron.com/Controls/, http://PlainMacaron.com/Download/
 *
 * This customizable jQuery plug-in allows a visitor to easily join a mailing list.
 * Copyright (C) 2016 Plain Macaron
 *
 * Mailinglistsubmitter is released under the GNU General Public License, Version 2 (or later).
 *
 * Mailinglistsubmitter is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software Foundation;
 * either version 2 of the License, or (at your option) any later version.
 *
 * Mailinglistsubmitter is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 * PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program;
 * if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 * Boston, MA  02110-1301, USA.
 * http://PlainMacaron.com/Permission/
 *
 * Please, contact us if you have any questions or feedback about this plug-in.
 * http://PlainMacaron.com/Contact/, support@plainmacaron.com
 *
 * This plug-in has the following dependencies: jQuery v1.5 or higher and jQuery UI v1.7 or 
 * higher.
 *
 * This plug-in was developed by Ryan E. Anderson.
 *
 */

(function(c,b,a,d){c.widget("plainmacaron.mailinglistsubmitter",{defaultElement:"<div>",flag:false,options:{ajax:null,backgroundColor:"#acddea",color:"#283437",containerIdentifier:"ui-mailing-list-submitter",containerClass:"ui-container",containerWidth:"100%",displayStyle:2,fieldsetClass:"ui-fieldset",formAction:"../php/join.php",formIdentifier:"subscribe-form",formMethod:"POST",formSubmitResultClass:"ui-submit-result",formSubmitResultFailureColor:"#5f1b17",formSubmitResultFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",formSubmitResultIdentifier:"result",formSubmitResultSuccessColor:"#163923",hasForm:true,imageClass:"ui-label icon",imageHeight:"26px",imagePath:"../png/Mailing-List-Envelope.png",imageWidth:"51px",inputBackgroundColor:"#ffffff",inputBlurBackgroundColor:"#283437",inputBlurClass:"ui-input-blur",inputBlurColor:"#ffffff",inputBorderColor:"transparent",inputClass:"ui-input",inputColor:"#283437",inputFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",inputFontSize:"0.9em",inputHeight:"24px",inputIdentifier:"email",inputLineHeight:"normal",inputMaxHeight:null,inputMaxWidth:null,inputName:"email",inputWidth:null,inputValue:"ENTER AN EMAIL ADDRESS",joinButtonBackgroundColor:"#283437",joinButtonBorderColor:"#283437",joinButtonClass:"ui-button",joinButtonColor:"#ffffff",joinButtonFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",joinButtonFontSize:"0.9em",joinButtonIdentifier:"subscribe-button",joinButtonLineHeight:"normal",joinButtonLink:"#subscribe-button",joinButtonTitle:"Subscribe to receive newsletter.",joinButtonValue:"Join",labelClass:"ui-label",labelFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",labelFontSize:"1.35em",labelIdentifier:"email-label",labelLineHeight:null,labelText:"Join our mailing list",labelTextClass:"ui-label-text",labelTextColor:"#283437",noticeClass:"ui-notice",noticeFontFamily:"Geneva, Verdana, 'Verdana Ref', sans-serif",noticeFontSize:"0.91em",noticeLineHeight:"normal",noticeText:"Your information is safe with us!",noticeTextColor:"#283437",submitCallback:c.noop},version:"1.1.0",_create:function(){var o;var n;var f;var k;var p;var j;var g;var h;var s;var w;var i;var v;var m;var u;var l;var r;var q;q=this;f=q.element;i=q.options;n=c("<div />");h=c("<fieldset />");s=c("<input type='text' />");g=c("<label><span></span></label>");p=c("<a />");m=c("<div><small></small></div>");l=c("<div><p></p></div>");o=c("<div />");n.attr("id",i.containerIdentifier).addClass(i.containerClass).css({backgroundColor:i.backgroundColor,color:i.color,width:i.containerWidth}).appendTo(f);h.addClass(i.fieldsetClass);v=n.parents("form");if(i.hasForm&&v.length===0){var e;e=c("<form />");e.append(h);h=e.first().attr("id",i.formIdentifier)}h.appendTo(n);w=i.inputName;if(w===null||w===""){w="email"}g.first().attr("id",i.labelIdentifier).attr("for",w).addClass(i.labelClass).css({fontFamily:i.labelFontFamily,fontSize:i.labelFontSize});j=g.find("span");j.addClass(i.labelTextClass).css({color:i.labelTextColor,cssFloat:(i.displayStyle===1||i.displayStyle===3?"left":"none")}).text(i.labelText);k=(i.displayStyle===3||i.displayStyle===4?null:i.imagePath);if(k!==null){var t;t=c("<img />");t.attr("src",i.imagePath).attr("alt",i.labelText).addClass(i.imageClass).css({height:i.imageHeight});g.first().append(t)}if(i.hasForm){n.find("fieldset").append(g)}else{h.first().append(g)}s.attr("id",i.inputIdentifier).attr("name",i.inputName).attr("value",i.inputValue).addClass(i.inputClass).css({backgroundColor:i.inputBackgroundColor,borderColor:i.inputBorderColor,color:i.inputColor,fontFamily:i.inputFontFamily,fontSize:i.inputFontSize,height:i.inputHeight,lineHeight:i.inputLineHeight,maxHeight:i.inputMaxHeight,maxWidth:i.inputMaxWidth,width:i.inputWidth}).insertAfter(g);j.css({lineHeight:((i.displayStyle===1||i.displayStyle===2)&&i.labelLineHeight!==null?Math.max(s.outerHeight(true),parseInt(c.trim(i.labelLineHeight)))+"px":i.labelLineHeight)});p.text(i.joinButtonValue).attr("id",i.joinButtonIdentifier).attr("href",i.joinButtonLink).attr("title",i.joinButtonTitle).addClass(i.joinButtonClass).css({backgroundColor:i.joinButtonBackgroundColor,borderColor:i.joinButtonBorderColor,color:i.joinButtonColor,fontFamily:i.joinButtonFontFamily,fontSize:i.joinButtonFontSize}).insertAfter(s);m.addClass(i.noticeClass).insertAfter(p);u=m.find("small").css({color:i.noticeTextColor,fontFamily:i.noticeFontFamily,fontSize:i.noticeFontSize,lineHeight:i.noticeLineHeight}).text(i.noticeText);l.first().attr("id",i.formSubmitResultIdentifier).addClass(i.formSubmitResultClass).insertAfter(p);r=l.find("p").css({fontFamily:i.formSubmitResultFontFamily,lineHeight:s.outerHeight(true)+"px"});o.css({clear:"both",width:"100%"}).insertAfter(n);q._on(s,{blur:q._inputBlurEventHandler,click:q._inputClickEventHandler,focus:q._inputFocusEventHandler,keydown:q._inputKeydownEventHandler});q._on(p,{blur:q._joinButtonBlurEventHandler,click:q._joinButtonClickEventHandler,mouseenter:q._joinButtonMouseenterEventHandler,mouseleave:q._joinButtonMouseleaveEventHandler});q._on(c("#"+i.formIdentifier),{submit:q._mailingListFormSubmitEventHandler})},_destroy:function(){var e;var h;var g;var f;f=this;h=f.element;g=f.options;e=h.children("#"+g.containerIdentifier);f._off(c("#"+g.inputIdentifier),"blur");f._off(c("#"+g.inputIdentifier),"click");f._off(c("#"+g.inputIdentifier),"focus");f._off(c("#"+g.inputIdentifier),"keydown");f._off(c("#"+g.joinButtonIdentifier),"blur");f._off(c("#"+g.joinButtonIdentifier),"click");f._off(c("#"+g.joinButtonIdentifier),"mouseenter");f._off(c("#"+g.joinButtonIdentifier),"mouseleave");f._off(c("#"+g.formIdentifier),"submit");e.next().remove();h.children(e).remove()},_inputBlurEventHandler:function(g){var i;var f;var e;var h;e=this;f=e.options;i=c(g.target);h=c.trim(i.val());if(!e.flag){if(h!==""&&h!==f.inputValue){i.addClass(f.inputBlurClass).css({color:f.inputBlurColor,backgroundColor:f.inputBlurBackgroundColor})}else{i.val(f.inputValue)}}else{if(i.hasClass(f.inputBlurClass)){i.removeClass(f.inputBlurClass).css({color:f.inputColor,backgroundColor:f.inputBackgroundColor})}e.flag=false}},_inputClickEventHandler:function(h){var j;var g;var e;var f;var i;f=this;g=f.options;j=c(h.target);e=c("#"+g.formSubmitResultIdentifier);i=c.trim(j.val());if(i===g.inputValue){j.val("")}e.find("p").html("")},_inputFocusEventHandler:function(g){var h;var f;var e;e=this;f=e.options;h=c(g.target);if(h.hasClass(f.inputBlurClass)){h.removeClass(f.inputBlurClass).css({color:f.inputColor,backgroundColor:f.inputBackgroundColor})}},_inputKeydownEventHandler:function(g){if(g.which===9){var j;var i;var f;var e;var h;e=this;f=e.options;j=c(g.target);i=c("#"+f.joinButtonIdentifier);e._off(j,"blur");h=c.trim(j.val());if(h===""){j.val(f.inputValue)}g.preventDefault();i.focus()}},_joinButtonBlurEventHandler:function(g){var i;var f;var e;var h;e=this;f=e.options;i=c("#"+f.inputIdentifier);e._on(i,{blur:e._inputBlurEventHandler});h=c.trim(i.val());if(!e.flag){if(h!==""&&h!==f.inputValue){i.addClass(f.inputBlurClass).css({color:f.inputBlurColor,backgroundColor:f.inputBlurBackgroundColor})}else{i.val(f.inputValue)}}else{if(i.hasClass(f.inputBlurClass)){i.removeClass(f.inputBlurClass).css({color:f.inputColor,backgroundColor:f.inputBackgroundColor})}e.flag=false}},_joinButtonClickEventHandler:function(h){var g;var f;var e;e=this;f=e.options;g=c("#"+f.formIdentifier);g.submit()},_joinButtonMouseenterEventHandler:function(g){var i;var h;var f;var e;e=this;f=e.options;i=c("#"+f.inputIdentifier);h=c(g.target);e._off(i,"blur");h.focus()},_joinButtonMouseleaveEventHandler:function(g){var h;var f;var e;e=this;f=e.options;h=c("#"+f.inputIdentifier);e._on(h,{blur:e._inputBlurEventHandler})},_joinCallback:function(e,f){return function(k,l,j){if(typeof f==="function"&&f!=c.noop){return f(e,k,l,j)}else{var i;var h;var g;h=e.options;i=k.message;g=c("#"+h.formSubmitResultIdentifier);g.find("p").css({color:h.formSubmitResultSuccessColor}).html("").hide().text(i).fadeIn("slow")}}},_mailingListFormSubmitEventHandler:function(f){var h;var m;var n;var l;var j;l=this;n=l.options;h=c("#"+n.inputIdentifier);m=c("#"+n.joinButtonIdentifier);j=c.trim(h.val());l.flag=l.validate(j);f.preventDefault();if(!l.flag){var o;o=c("#"+n.formSubmitResultIdentifier);o.find("p").html("").hide().text("The email appears to be invalid.").css({color:n.formSubmitResultFailureColor}).fadeIn("slow")}else{var i;var k;var g;i=n.ajax;if(i===null){var e;e=n.inputName;if(e===null||e===""){e="email"}i={type:n.formMethod,url:n.formAction,data:{name:j},dataType:"json"}}g=c.ajax(i);k=l._joinCallback;g.done(k(l,n.submitCallback));h.val(n.inputValue)}if(h.is(":focus")){h.blur()}if(m.is(":focus")){m.blur()}},_setImagePath:function(j){var e;var h;var i;var g;var f;f=this;h=f.element;g=f.options;e=h.children("#"+g.containerIdentifier);i=e.find("#"+g.labelIdentifier).find("img");if(j!==null){if(i.length===0){i=c("<img />");e.find("#"+g.labelIdentifier).append(i)}i.attr("src",j).attr("alt",g.labelText).addClass(g.imageClass).css({height:g.imageHeight})}else{i.remove()}},_setOption:function(n,m){var e;var i;var q;var p;p=this;i=p.element;q=p.options;e=i.children("#"+q.containerIdentifier);switch(n){case"backgroundColor":e.css({backgroundColor:m});break;case"color":e.css({color:m});break;case"containerClass":e.removeClass().addClass(m);break;case"containerIdentifier":e.attr("id",m);break;case"containerWidth":e.css({width:m});break;case"displayStyle":var j;var h;h=e.find("#"+q.inputIdentifier);e.find("#"+q.labelIdentifier).find("span").css({cssFloat:(m===1||m===3?"left":"none"),lineHeight:((m===1||m===3)&&q.labelLineHeight?Math.max(h.outerHeight(true),parseInt(c.trim(q.labelLineHeight)))+"px":q.labelLineHeight)});j=(m===3||m===4?null:q.imagePath);p._setImagePath(j);break;case"fieldsetClass":e.find("form").find("fieldset").removeClass().addClass(m);break;case"formIdentifier":if(q.hasForm){e.find("form").attr("id",m)}break;case"formSubmitResultClass":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).removeClass().addClass(m);break;case"formSubmitResultFontFamily":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).find("p").css({fontFamily:m});break;case"formSubmitResultIdentifier":e.find("form").find("fieldset").find("div").first().attr("id",m);break;case"hasForm":var k;k=e.parents("form");if(m){var g;var l;g=e.children("form");l=e.parent();if(l.is("form")){e.unwrap()}if(g.length===0&&k.length===0){var o;o=c("<form />");o.attr("id",q.formIdentifier);e.find("fieldset").wrap(o)}}else{e.find("fieldset").unwrap();if(k.length===0){var f;f=c("<form />");f.attr("id",q.formIdentifier);e.next().andSelf().wrapAll(f)}}p._on(c("#"+q.inputIdentifier),{blur:p._inputBlurEventHandler,click:p._inputClickEventHandler,keydown:p._inputKeydownEventHandler});p._on(c("#"+q.joinButtonIdentifier),{blur:p._joinButtonBlurEventHandler,click:p._joinButtonClickEventHandler});p._on(c("#"+q.formIdentifier),{submit:p._mailingListFormSubmitEventHandler});break;case"imageClass":e.find("#"+q.labelIdentifier).find("img").removeClass().addClass(m);break;case"imageHeight":e.find("#"+q.labelIdentifier).find("img").css({height:m});break;case"imagePath":p._setImagePath(m);break;case"imageWidth":e.find("#"+q.labelIdentifier).find("img").css({width:m});break;case"inputBackgroundColor":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({backgroundColor:m});break;case"inputBorderColor":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({borderColor:m});break;case"inputClass":e.find("#"+q.formIdentifier).find("fieldset").find("input").removeClass().addClass(m);break;case"inputColor":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({color:m});break;case"inputFontFamily":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({fontFamily:m});break;case"inputFontSize":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({fontSize:m});break;case"inputHeight":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({height:m});break;case"inputIdentifier":e.find("#"+q.formIdentifier).find("fieldset").find("input").attr("id",m);break;case"inputLineHeight":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({lineHeight:m});break;case"inputMaxHeight":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({maxHeight:m});break;case"inputMaxWidth":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({maxWidth:m});break;case"inputName":e.find("fieldset").find("input").attr("name",m);break;case"inputWidth":e.find("#"+q.formIdentifier).find("fieldset").find("input").css({width:m});break;case"inputValue":e.find("#"+q.formIdentifier).find("fieldset").find("input").attr("value",m);break;case"joinButtonBackgroundColor":e.find("#"+q.formIdentifier).find("fieldset").find("a").css({backgroundColor:m});break;case"joinButtonBorderColor":e.find("#"+q.formIdentifier).find("fieldset").find("a").css({borderColor:m});break;case"joinButtonClass":e.find("#"+q.formIdentifier).find("fieldset").find("a").removeClass().addClass(m);break;case"joinButtonColor":e.find("#"+q.formIdentifier).find("fieldset").find("a").css({color:m});break;case"joinButtonFontFamily":e.find("#"+q.formIdentifier).find("fieldset").find("a").css({fontFamily:m});break;case"joinButtonFontSize":e.find("#"+q.formIdentifier).find("fieldset").find("a").css({fontSize:m});break;case"joinButtonIdentifier":e.find("#"+q.formIdentifier).find("fieldset").find("a").attr("id",m);break;case"joinButtonLineHeight":e.find("#"+q.formIdentifier).find("fieldset").find("a").css({lineHeight:m});break;case"joinButtonLink":e.find("#"+q.formIdentifier).find("fieldset").find("a").attr("href",m);break;case"joinButtonTitle":e.find("#"+q.formIdentifier).find("fieldset").find("a").attr("title",m);break;case"joinButtonValue":e.find("#"+q.formIdentifier).find("fieldset").find("a").text(m);break;case"labelClass":e.find("#"+q.labelIdentifier).removeClass().addClass(m);break;case"labelFontFamily":e.find("#"+q.labelIdentifier).css({fontFamily:m});break;case"labelFontSize":e.find("#"+q.labelIdentifier).css({fontSize:m});break;case"labelIdentifier":e.find("form").find("fieldset").find("label").attr("id",m);break;case"labelLineHeight":e.find("#"+q.labelIdentifier).css({lineHeight:m});break;case"labelText":e.find("#"+q.labelIdentifier).find("span").text(m);e.find("#"+q.labelIdentifier).find("img").attr("alt",m);break;case"labelTextClass":e.find("#"+q.labelIdentifier).find("span").removeClass().addClass(m);break;case"labelTextColor":e.find("#"+q.labelIdentifier).find("span").css({color:m});break;case"noticeClass":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).next("div").removeClass().addClass(m);break;case"noticeFontFamily":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).next("div").find("small").css({fontFamily:m});break;case"noticeFontSize":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).next("div").find("small").css({fontSize:m});break;case"noticeLineHeight":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).next("div").find("small").css({lineHeight:m});break;case"noticeText":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).next("div").find("small").append(m);break;case"noticeTextColor":e.find("form").find("fieldset").find("#"+q.formSubmitResultIdentifier).next("div").find("small").css({color:m});break;default:break}c.Widget.prototype._setOption.apply(p,arguments)},destroy:function(){var e;e=this;e._destroy()},validate:function(g){var e;var f;e=false;f=/^\b[A-Z0-9._\-%]+@[A-Z0-9\-.]+\.[A-Z]{2,4}\b$/i;if(f.test(g)){e=true}return e}})})(jQuery,window,document);