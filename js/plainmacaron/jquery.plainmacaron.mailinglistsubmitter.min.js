/*!
 * jQuery Mailinglistsubmitter plug-in v1.0.0 - 2015-09-22T07:08Z
 * http://PlainMacaron.com/Controls/, http://PlainMacaron.com/Download/
 *
 * This customizable jQuery plug-in allows a visitor to easily join a mailing list.
 * Copyright (C) 2015 Plain Macaron
 *
 * Mailinglistsubmitter is released under the GNU General Public License, Version 2 (or later).
 *
 * Mailinglistsubmitter is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software Foundation;
 * either version 2 of the License, or (at your option) any later version.
 *
 * Mailinglistsubmitter is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 * PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program;
 * if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 * Boston, MA  02110-1301, USA.
 * http://PlainMacaron.com/Permission/
 *
 * Please, contact us if you have any questions or feedback about this plug-in.
 * http://PlainMacaron.com/Contact/, support@plainmacaron.com
 *
 * This plug-in has the following dependencies: jQuery v1.5 or higher and jQuery UI v1.7 or 
 * higher.
 *
 * This plug-in was developed by Ryan E. Anderson.
 *
 */

(function(c,b,a,d){c.widget("plainmacaron.mailinglistsubmitter",{defaultElement:"<div>",flag:false,options:{ajax:null,backgroundColor:"#acddea",color:"#283437",containerIdentifier:"ui-mailing-list-submitter",containerClass:"ui-container",containerWidth:"100%",displayStyle:2,fieldsetClass:"ui-fieldset",formAction:"../php/join.php",formIdentifier:"subscribe-form",formMethod:"POST",formSubmitResultClass:"ui-submit-result",formSubmitResultFailureColor:"#5f1b17",formSubmitResultFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",formSubmitResultIdentifier:"result",formSubmitResultSuccessColor:"#163923",hasForm:true,imageClass:"ui-label icon",imageHeight:"26px",imagePath:"../png/Mailing-List-Envelope.png",imageWidth:"51px",inputBackgroundColor:"#ffffff",inputBlurBackgroundColor:"#283437",inputBlurClass:"ui-input-blur",inputBlurColor:"#ffffff",inputBorderColor:"transparent",inputClass:"ui-input",inputColor:"#283437",inputFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",inputFontSize:"0.9em",inputHeight:"24px",inputIdentifier:"email",inputLineHeight:"normal",inputMaxHeight:null,inputMaxWidth:null,inputName:"email",inputWidth:null,inputValue:"ENTER AN EMAIL ADDRESS",joinButtonBackgroundColor:"#283437",joinButtonBorderColor:"#283437",joinButtonClass:"ui-button",joinButtonColor:"#ffffff",joinButtonFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",joinButtonFontSize:"0.9em",joinButtonIdentifier:"subscribe-button",joinButtonLineHeight:"normal",joinButtonLink:"#subscribe-button",joinButtonTitle:"Subscribe to receive newsletter.",joinButtonValue:"Join",labelClass:"ui-label",labelFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",labelFontSize:"1.35em",labelIdentifier:"email-label",labelLineHeight:null,labelText:"Join our mailing list",labelTextClass:"ui-label-text",labelTextColor:"#283437",noticeClass:"ui-notice",noticeFontFamily:"Geneva, Verdana, 'Verdana Ref', sans-serif",noticeFontSize:"0.91em",noticeLineHeight:"normal",noticeText:"Your information is safe with us!",noticeTextColor:"#283437",submitCallback:c.noop},version:"1.0.0",_create:function(){var n;var m;var f;var t;var o;var j;var g;var h;var r;var v;var i;var u;var l;var s;var k;var q;var p;p=this;f=p.element;i=p.options;m=c("<div />");h=c("<fieldset />");r=c("<input type='text' />");g=c("<label><span></span><img></img></label>");o=c("<a />");l=c("<div><small></small></div>");k=c("<div><p></p></div>");n=c("<div />");m.attr("id",i.containerIdentifier).addClass(i.containerClass).css({backgroundColor:i.backgroundColor,color:i.color,width:i.containerWidth}).appendTo(f);h.addClass(i.fieldsetClass);u=m.parents("form");if(i.hasForm&&u.length===0){var e;e=c("<form />");e.append(h);h=e.first().attr("id",i.formIdentifier)}h.appendTo(m);v=i.inputName;if(v===null||v===""){v="email"}g.first().attr("id",i.labelIdentifier).attr("for",v).addClass(i.labelClass).css({fontFamily:i.labelFontFamily,fontSize:i.labelFontSize});j=g.find("span").addClass(i.labelTextClass).css({color:i.labelTextColor,cssFloat:(i.displayStyle===1?"left":"none")}).text(i.labelText);t=g.find("img").attr("src",i.imagePath).attr("alt",i.labelText).addClass(i.imageClass).css({height:i.imageHeight});if(i.hasForm){m.find("fieldset").append(g)}else{h.first().append(g)}r.attr("id",i.inputIdentifier).attr("name",i.inputName).attr("value",i.inputValue).addClass(i.inputClass).css({backgroundColor:i.inputBackgroundColor,borderColor:i.inputBorderColor,color:i.inputColor,fontFamily:i.inputFontFamily,fontSize:i.inputFontSize,height:i.inputHeight,lineHeight:i.inputLineHeight,maxHeight:i.inputMaxHeight,maxWidth:i.inputMaxWidth,width:i.inputWidth}).insertAfter(g);j.css({lineHeight:(i.displayStyle===1&&i.labelLineHeight!==null?Math.max(r.outerHeight(true),parseInt(c.trim(i.labelLineHeight)))+"px":i.labelLineHeight)});o.text(i.joinButtonValue).attr("id",i.joinButtonIdentifier).attr("href",i.joinButtonLink).attr("title",i.joinButtonTitle).addClass(i.joinButtonClass).css({backgroundColor:i.joinButtonBackgroundColor,borderColor:i.joinButtonBorderColor,color:i.joinButtonColor,fontFamily:i.joinButtonFontFamily,fontSize:i.joinButtonFontSize}).insertAfter(r);l.addClass(i.noticeClass).insertAfter(o);s=l.find("small").css({color:i.noticeTextColor,fontFamily:i.noticeFontFamily,fontSize:i.noticeFontSize,lineHeight:i.noticeLineHeight}).text(i.noticeText);k.first().attr("id",i.formSubmitResultIdentifier).addClass(i.formSubmitResultClass).insertAfter(o);q=k.find("p").css({fontFamily:i.formSubmitResultFontFamily,lineHeight:r.outerHeight(true)+"px"});n.css({clear:"both",width:"100%"}).insertAfter(m);p._on(r,{blur:p._inputBlurEventHandler,click:p._inputClickEventHandler,focus:p._inputFocusEventHandler,keydown:p._inputKeydownEventHandler});p._on(o,{blur:p._joinButtonBlurEventHandler,click:p._joinButtonClickEventHandler,mouseenter:p._joinButtonMouseenterEventHandler,mouseleave:p._joinButtonMouseleaveEventHandler});p._on(c("#"+i.formIdentifier),{submit:p._mailingListFormSubmitEventHandler})},_destroy:function(){var e;var h;var g;var f;f=this;h=f.element;g=f.options;e=h.children("#"+g.containerIdentifier);f._off(c("#"+g.inputIdentifier),"blur");f._off(c("#"+g.inputIdentifier),"click");f._off(c("#"+g.inputIdentifier),"focus");f._off(c("#"+g.inputIdentifier),"keydown");f._off(c("#"+g.joinButtonIdentifier),"blur");f._off(c("#"+g.joinButtonIdentifier),"click");f._off(c("#"+g.joinButtonIdentifier),"mouseenter");f._off(c("#"+g.joinButtonIdentifier),"mouseleave");f._off(c("#"+g.formIdentifier),"submit");e.next().remove();h.children(e).remove()},_inputBlurEventHandler:function(g){var i;var f;var e;var h;e=this;f=e.options;i=c(g.target);h=c.trim(i.val());if(!e.flag){if(h!==""&&h!==f.inputValue){i.addClass(f.inputBlurClass).css({color:f.inputBlurColor,backgroundColor:f.inputBlurBackgroundColor})}else{i.val(f.inputValue)}}else{if(i.hasClass(f.inputBlurClass)){i.removeClass(f.inputBlurClass).css({color:f.inputColor,backgroundColor:f.inputBackgroundColor})}e.flag=false}},_inputClickEventHandler:function(h){var j;var g;var e;var f;var i;f=this;g=f.options;j=c(h.target);e=c("#"+g.formSubmitResultIdentifier);i=c.trim(j.val());if(i===g.inputValue){j.val("")}e.find("p").html("")},_inputFocusEventHandler:function(g){var h;var f;var e;e=this;f=e.options;h=c(g.target);if(h.hasClass(f.inputBlurClass)){h.removeClass(f.inputBlurClass).css({color:f.inputColor,backgroundColor:f.inputBackgroundColor})}},_inputKeydownEventHandler:function(g){if(g.which===9){var j;var i;var f;var e;var h;e=this;f=e.options;j=c(g.target);i=c("#"+f.joinButtonIdentifier);e._off(j,"blur");h=c.trim(j.val());if(h===""){j.val(f.inputValue)}g.preventDefault();i.focus()}},_joinButtonBlurEventHandler:function(g){var i;var f;var e;var h;e=this;f=e.options;i=c("#"+f.inputIdentifier);e._on(i,{blur:e._inputBlurEventHandler});h=c.trim(i.val());if(!e.flag){if(h!==""&&h!==f.inputValue){i.addClass(f.inputBlurClass).css({color:f.inputBlurColor,backgroundColor:f.inputBlurBackgroundColor})}else{i.val(f.inputValue)}}else{if(i.hasClass(f.inputBlurClass)){i.removeClass(f.inputBlurClass).css({color:f.inputColor,backgroundColor:f.inputBackgroundColor})}e.flag=false}},_joinButtonClickEventHandler:function(h){var g;var f;var e;e=this;f=e.options;g=c("#"+f.formIdentifier);g.submit()},_joinButtonMouseenterEventHandler:function(g){var i;var h;var f;var e;e=this;f=e.options;i=c("#"+f.inputIdentifier);h=c(g.target);e._off(i,"blur");h.focus()},_joinButtonMouseleaveEventHandler:function(g){var h;var f;var e;e=this;f=e.options;h=c("#"+f.inputIdentifier);e._on(h,{blur:e._inputBlurEventHandler})},_joinCallback:function(e,f){return function(k,l,j){if(typeof f==="function"&&f!=c.noop){return f(e,k,l,j)}else{var i;var h;var g;h=e.options;i=k.message;g=c("#"+h.formSubmitResultIdentifier);g.find("p").css({color:h.formSubmitResultSuccessColor}).html("").hide().text(i).fadeIn("slow")}}},_mailingListFormSubmitEventHandler:function(f){var h;var m;var n;var l;var j;l=this;n=this.options;h=c("#"+n.inputIdentifier);m=c("#"+n.joinButtonIdentifier);j=c.trim(h.val());l.flag=l.validate(j);f.preventDefault();if(!l.flag){var o;o=c("#"+n.formSubmitResultIdentifier);o.find("p").html("").hide().text("The email appears to be invalid.").css({color:n.formSubmitResultFailureColor}).fadeIn("slow")}else{var i;var k;var g;i=n.ajax;if(i===null){var e;e=n.inputName;if(e===null||e===""){e="email"}i={type:n.formMethod,url:n.formAction,data:{name:j},dataType:"json"}}g=c.ajax(i);k=l._joinCallback;g.done(k(l,n.submitCallback));h.val(n.inputValue)}if(h.is(":focus")){h.blur()}if(m.is(":focus")){m.blur()}},_setOption:function(m,l){var e;var i;var p;var o;o=this;i=o.element;p=o.options;e=i.children("#"+p.containerIdentifier);switch(m){case"backgroundColor":e.css({backgroundColor:l});break;case"color":e.css({color:l});break;case"containerClass":e.removeClass().addClass(l);break;case"containerIdentifier":e.attr("id",l);break;case"containerWidth":e.css({width:l});break;case"displayStyle":var h;h=e.find("#"+p.inputIdentifier);e.find("#"+p.labelIdentifier).find("span").css({cssFloat:(l===1?"left":"none"),lineHeight:(p.displayStyle===1&&p.labelLineHeight!==null?Math.max(h.outerHeight(),parseInt(c.trim(p.labelLineHeight)))+"px":p.labelLineHeight)});break;case"fieldsetClass":e.find("form").find("fieldset").removeClass().addClass(l);break;case"formIdentifier":if(p.hasForm){e.find("form").attr("id",l)}break;case"formSubmitResultClass":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).removeClass().addClass(l);break;case"formSubmitResultFontFamily":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).find("p").css({fontFamily:l});break;case"formSubmitResultIdentifier":e.find("form").find("fieldset").find("div").first().attr("id",l);break;case"hasForm":var j;j=e.parents("form");if(l){var g;var k;g=e.children("form");k=e.parent();if(k.is("form")){e.unwrap()}if(g.length===0&&j.length===0){var n;n=c("<form />");n.attr("id",p.formIdentifier);e.find("fieldset").wrap(n)}}else{e.find("fieldset").unwrap();if(j.length===0){var f;f=c("<form />");f.attr("id",p.formIdentifier);e.next().andSelf().wrapAll(f)}}o._on(c("#"+p.inputIdentifier),{blur:o._inputBlurEventHandler,click:o._inputClickEventHandler,keydown:o._inputKeydownEventHandler});o._on(c("#"+p.joinButtonIdentifier),{blur:o._joinButtonBlurEventHandler,click:o._joinButtonClickEventHandler});o._on(c("#"+p.formIdentifier),{submit:o._mailingListFormSubmitEventHandler});break;case"imageClass":e.find("#"+p.labelIdentifier).find("img").removeClass().addClass(l);break;case"imageHeight":e.find("#"+p.labelIdentifier).find("img").css({height:l});break;case"imagePath":e.find("#"+p.labelIdentifier).find("img").attr("src",l);break;case"imageWidth":e.find("#"+p.labelIdentifier).find("img").css({width:l});break;case"inputBackgroundColor":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({backgroundColor:l});break;case"inputBorderColor":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({borderColor:l});break;case"inputClass":e.find("#"+p.formIdentifier).find("fieldset").find("input").removeClass().addClass(l);break;case"inputColor":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({color:l});break;case"inputFontFamily":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({fontFamily:l});break;case"inputFontSize":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({fontSize:l});break;case"inputHeight":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({height:l});break;case"inputIdentifier":e.find("#"+p.formIdentifier).find("fieldset").find("input").attr("id",l);break;case"inputLineHeight":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({lineHeight:l});break;case"inputMaxHeight":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({maxHeight:l});break;case"inputMaxWidth":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({maxWidth:l});break;case"inputName":e.find("fieldset").find("input").attr("name",l);break;case"inputWidth":e.find("#"+p.formIdentifier).find("fieldset").find("input").css({width:l});break;case"inputValue":e.find("#"+p.formIdentifier).find("fieldset").find("input").attr("value",l);break;case"joinButtonBackgroundColor":e.find("#"+p.formIdentifier).find("fieldset").find("a").css({backgroundColor:l});break;case"joinButtonBorderColor":e.find("#"+p.formIdentifier).find("fieldset").find("a").css({borderColor:l});break;case"joinButtonClass":e.find("#"+p.formIdentifier).find("fieldset").find("a").removeClass().addClass(l);break;case"joinButtonColor":e.find("#"+p.formIdentifier).find("fieldset").find("a").css({color:l});break;case"joinButtonFontFamily":e.find("#"+p.formIdentifier).find("fieldset").find("a").css({fontFamily:l});break;case"joinButtonFontSize":e.find("#"+p.formIdentifier).find("fieldset").find("a").css({fontSize:l});break;case"joinButtonIdentifier":e.find("#"+p.formIdentifier).find("fieldset").find("a").attr("id",l);break;case"joinButtonLineHeight":e.find("#"+p.formIdentifier).find("fieldset").find("a").css({lineHeight:l});break;case"joinButtonLink":e.find("#"+p.formIdentifier).find("fieldset").find("a").attr("href",l);break;case"joinButtonTitle":e.find("#"+p.formIdentifier).find("fieldset").find("a").attr("title",l);break;case"joinButtonValue":e.find("#"+p.formIdentifier).find("fieldset").find("a").text(l);break;case"labelClass":e.find("#"+p.labelIdentifier).removeClass().addClass(l);break;case"labelFontFamily":e.find("#"+p.labelIdentifier).css({fontFamily:l});break;case"labelFontSize":e.find("#"+p.labelIdentifier).css({fontSize:l});break;case"labelIdentifier":e.find("form").find("fieldset").find("label").attr("id",l);break;case"labelLineHeight":e.find("#"+p.labelIdentifier).css({lineHeight:l});break;case"labelText":e.find("#"+p.labelIdentifier).find("span").text(l);e.find("#"+p.labelIdentifier).find("img").attr("alt",l);break;case"labelTextClass":e.find("#"+p.labelIdentifier).find("span").removeClass().addClass(l);break;case"labelTextColor":e.find("#"+p.labelIdentifier).find("span").css({color:l});break;case"noticeClass":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).next("div").removeClass().addClass(l);break;case"noticeFontFamily":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).next("div").find("small").css({fontFamily:l});break;case"noticeFontSize":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).next("div").find("small").css({fontSize:l});break;case"noticeLineHeight":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).next("div").find("small").css({lineHeight:l});break;case"noticeText":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).next("div").find("small").append(l);break;case"noticeTextColor":e.find("form").find("fieldset").find("#"+p.formSubmitResultIdentifier).next("div").find("small").css({color:l});break;default:break}c.Widget.prototype._setOption.apply(o,arguments)},destroy:function(){var e;e=this;e._destroy()},validate:function(g){var e;var f;e=false;f=/^\b[A-Z0-9._\-%]+@[A-Z0-9\-.]+\.[A-Z]{2,4}\b$/i;if(f.test(g)){e=true}return e}})})(jQuery,window,document);